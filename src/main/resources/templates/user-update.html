<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/css/style.css}"/>
    <title>Изменить пользователя</title>
</head>
<body>
<div class="container-user-update">
    <h1>Изменить пользователя</h1>
    <form action="#" method="post" th:action="@{/admin/user-update}" th:object="${user}">

        <input id="id" name="id" readonly="readonly" th:value="${user.id}" type="hidden"/>

        <div class="form-group">
            <label for="name">Имя</label>
            <input id="name" th:field="*{name}" type="text"/>
            <div style="color:red" th:errors="*{name}" th:if="${#fields.hasErrors('name')}">Error!</div>
        </div>

        <div class="form-group">
            <label for="lastName">Фамилия</label>
            <input id="lastName" th:field="*{surname}" type="text"/>
            <div style="color:red" th:errors="*{surname}" th:if="${#fields.hasErrors('surname')}">Error!</div>
        </div>

        <div class="form-group">
            <label for="age">Возраст</label>
            <input id="age" th:field="*{age}" type="number"/>
            <div style="color:red" th:errors="*{age}" th:if="${#fields.hasErrors('age')}">Error!</div>
        </div>

        <div class="form-group">
            <label for="username">Логин</label>
            <input id="username" th:field="*{username}" type="text"/>
            <div style="color:red" th:errors="*{username}" th:if="${#fields.hasErrors('username')}">Error!</div>
        </div>

        <div class="form-group">
            <label for="password">Пароль</label>
            <input id="password" th:field="*{password}" type="password"/>
            <div style="color:red" th:errors="*{password}" th:if="${#fields.hasErrors('password')}">Error!</div>
        </div>


        <div class="form-group">
            <label>Роли</label>
            <div class="container-roles">
                <div style="margin-bottom: 5px" th:each="role : ${roles}">
                    <input name="roles"
                           th:field="*{roles}"
                           th:text="${role.getName()}"
                           th:value="${role.getId()}"
                           type="checkbox"
                    />
                    <div style="color:red" th:errors="*{roles}" th:if="${#fields.hasErrors('roles')}">Ошибка!</div>
                </div>
            </div>
        </div>

        <input name="_method" type="hidden" value="PATCH"/>
        <input class="action-button" type="submit" value="Сохранить изменения"/>
        <a class="action-button" th:href="@{/admin}">Вернуться на панель админа</a>
        <a class="action-button" th:href="@{/logout}">Выйти из аккаунта</a>
    </form>
</div>
</body>
</html>